RDSSecurityGroup:
  Type: AWS::EC2::SecurityGroup
  Properties:
    GroupDescription: >
      Security Group do RDS PostgreSQL.
      Aceita conex√µes apenas do ECS.
    VpcId: !Ref VpcId

    # üîΩ ENTRADA (quem pode falar com o banco)
    SecurityGroupIngress:
      - IpProtocol: tcp
        FromPort: 5432
        ToPort: 5432
        SourceSecurityGroupId: !Ref ECSSecurityGroup
        Description: >
          Permite conex√£o Postgres SOMENTE
          vinda do ECS (Metabase)

    # üîº SA√çDA (respostas do banco)
    SecurityGroupEgress:
      - IpProtocol: -1
        CidrIp: 0.0.0.0/0
        Description: >
          Permite que o RDS responda
          √†s conex√µes iniciadas
